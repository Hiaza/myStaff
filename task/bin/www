#!/usr/bin/nodejs
const debug = require('debug')('my-application');
const app = require('../app');
const config = require('../config');
const mongoose = require('mongoose');

const databaseUrl = config.DatabaseUrl;
const serverPort = config.ServerPort;
console.log(config);

const connectOptions = { useNewUrlParser: true};

mongoose.connect(databaseUrl,connectOptions)
    .then(()=>console.log(`Database connected: ${config.databaseUrl}`))
    .then(()=> {const server = app.listen(serverPort, () =>console.log ('Express server listening on port ' + serverPort))})
    .catch(err => console.log(`Start error: ${err}`));

